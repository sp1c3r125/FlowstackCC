<!DOCTYPE html>
<html lang="en" class="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BI Command Center | Standalone Widget</title>
    
    <!-- 1. Tailwind CSS (Styling) -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
      tailwind.config = {
        darkMode: 'class',
        theme: {
          extend: {
            colors: {
              background: "#0a0a0a",
              foreground: "#ededed",
              primary: { DEFAULT: "#00f0ff", foreground: "#000000" }, // Neon Cyan
              secondary: { DEFAULT: "#1f1f1f", foreground: "#a1a1aa" },
              accent: { DEFAULT: "#7000ff", foreground: "#ffffff" },
            },
            fontFamily: {
              sans: ['Inter', 'sans-serif'],
              mono: ['JetBrains Mono', 'monospace'],
            }
          },
        },
      }
    </script>

    <!-- 2. Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=JetBrains+Mono:wght@400;500;700&display=swap" rel="stylesheet">
    
    <!-- 3. Import Map (Dependencies) -->
    <script type="importmap">
    {
      "imports": {
        "react": "https://esm.sh/react@18.2.0",
        "react-dom/client": "https://esm.sh/react-dom@18.2.0/client",
        "recharts": "https://esm.sh/recharts@2.12.0?external=react,react-dom",
        "lucide-react": "https://esm.sh/lucide-react@0.330.0?external=react"
      }
    }
    </script>
    
    <!-- 4. Babel (JSX Compilation) -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <style>
        body { background-color: transparent; }
        /* Scrollbar hiding for clean widget look */
        ::-webkit-scrollbar { width: 0px; background: transparent; }
    </style>
</head>
<body class="antialiased overflow-hidden p-4">
    <div id="root" class="w-full h-full flex items-center justify-center"></div>

    <script type="text/babel" data-type="module">
        import React from 'react';
        import { createRoot } from 'react-dom/client';
        import { BarChart, Bar, XAxis, Tooltip, ResponsiveContainer, Cell, PieChart, Pie, Label } from 'recharts';
        import { TrendingUp, Activity } from 'lucide-react';

        // --- Configuration Data ---
        const weeklyData = [
          { name: 'Week 1', value: 84 },
          { name: 'Week 2', value: 112 },
          { name: 'Week 3', value: 98 },
          { name: 'Current', value: 156, isCurrent: true },
        ];

        const intentData = [
          { name: 'Positive Intent', value: 70, fill: '#00f0ff' }, // Neon Cyan
          { name: 'Info Seeking', value: 15, fill: '#7000ff' },    // Neon Purple
          { name: 'Unqualified', value: 15, fill: '#3f3f46' },     // Dark Gray
        ];

        // --- Components ---
        const CustomTooltip = ({ active, payload }) => {
          if (active && payload && payload.length) {
            return (
              <div className="bg-black/90 backdrop-blur-md border border-white/10 p-2 rounded shadow-[0_0_15px_rgba(0,0,0,0.5)]">
                <p className="text-[#00f0ff] font-mono text-xs font-bold uppercase tracking-wider">
                    {payload[0].value} Leads
                </p>
              </div>
            );
          }
          return null;
        };

        const BICommandCenterWidget = () => {
          return (
            <div className="w-full max-w-5xl mx-auto bg-[#0a0a0a] border border-white/10 rounded-xl p-6 relative overflow-hidden flex flex-col lg:flex-row gap-8 shadow-2xl">
              
              {/* Decorative Header Line */}
              <div className="absolute top-0 left-0 w-full h-0.5 bg-gradient-to-r from-transparent via-[#00f0ff] to-transparent opacity-30"></div>

              {/* SECTION 1: Lead Intent Bar Chart */}
              <div className="flex-1 flex flex-col min-w-0">
                <div className="flex justify-between items-start mb-6">
                    <div>
                        <div className="flex items-center gap-2 mb-1">
                            <Activity className="w-4 h-4 text-[#00f0ff]" />
                            <h3 className="text-base font-bold text-gray-200 uppercase tracking-tight">Weekly Lead Intent</h3>
                        </div>
                        <p className="text-[10px] text-gray-500 font-mono uppercase tracking-widest pl-6">Live Ingestion Stream</p>
                    </div>
                    
                    {/* Growth Metric */}
                    <div className="flex items-center gap-3 bg-green-900/10 px-3 py-1.5 rounded border border-green-500/20">
                        <div className="p-1 bg-green-500/20 rounded-full">
                            <TrendingUp className="w-3 h-3 text-green-400" />
                        </div>
                        <div className="flex flex-col items-end">
                            <span className="text-[9px] text-gray-500 font-mono uppercase leading-none mb-0.5">Growth Delta</span>
                            <span className="text-xs font-bold text-green-400 leading-none">+42%</span>
                        </div>
                    </div>
                </div>
                
                <div className="h-[200px] w-full relative">
                    <ResponsiveContainer width="100%" height="100%">
                        <BarChart data={weeklyData} margin={{ top: 5, right: 0, left: -25, bottom: 0 }}>
                        <XAxis 
                            dataKey="name" 
                            axisLine={false} 
                            tickLine={false} 
                            tick={{ fill: '#71717a', fontSize: 10, fontFamily: 'JetBrains Mono' }} 
                            dy={10}
                        />
                        <Tooltip content={<CustomTooltip />} cursor={{ fill: 'rgba(255,255,255,0.03)' }} />
                        <Bar dataKey="value" radius={[4, 4, 0, 0]} animationDuration={1500}>
                            {weeklyData.map((entry, index) => (
                            <Cell 
                                key={`cell-${index}`} 
                                fill={entry.isCurrent ? '#00f0ff' : '#27272a'} 
                                className={entry.isCurrent 
                                    ? "drop-shadow-[0_0_10px_rgba(0,240,255,0.4)] transition-opacity duration-300 hover:opacity-80" 
                                    : "transition-colors duration-300 hover:fill-gray-600"
                                }
                            />
                            ))}
                        </Bar>
                        </BarChart>
                    </ResponsiveContainer>
                </div>
              </div>

              {/* Divider for Desktop */}
              <div className="hidden lg:block w-px bg-white/5 my-2"></div>

              {/* SECTION 2: AI Accuracy Donut */}
              <div className="w-full lg:w-1/3 flex flex-col items-center justify-center min-w-[240px]">
                  <div className="w-full h-[180px] relative">
                    <ResponsiveContainer width="100%" height="100%">
                        <PieChart>
                        <Pie
                            data={intentData}
                            innerRadius={55}
                            outerRadius={75}
                            paddingAngle={4}
                            dataKey="value"
                            stroke="none"
                        >
                            {intentData.map((entry, index) => (
                            <Cell key={`cell-${index}`} fill={entry.fill} />
                            ))}
                            <Label 
                            value="94%" 
                            position="center" 
                            className="fill-white text-3xl font-bold font-sans"
                            />
                            <Label 
                            value="AI ACCURACY" 
                            position="center" 
                            dy={20}
                            className="fill-gray-500 text-[9px] font-mono font-bold tracking-widest"
                            />
                        </Pie>
                        </PieChart>
                    </ResponsiveContainer>
                  </div>
                  
                  {/* Legend */}
                  <div className="grid grid-cols-2 gap-x-4 gap-y-2 mt-2 w-full px-4">
                     {intentData.map((item) => (
                         <div key={item.name} className="flex items-center gap-1.5">
                             <div className="w-1.5 h-1.5 rounded-full shadow-[0_0_5px_currentColor]" style={{ backgroundColor: item.fill, color: item.fill }} />
                             <span className="text-[10px] text-gray-400 uppercase tracking-wide">{item.name}</span>
                         </div>
                     ))}
                  </div>
              </div>
            </div>
          );
        };

        const root = createRoot(document.getElementById('root'));
        root.render(<BICommandCenterWidget />);
    </script>
</body>
</html>